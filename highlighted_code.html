<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<!--
generated by Pygments <https://pygments.org/>
Copyright 2006-2024 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
-->
<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=None">
  <style type="text/css">
/*
generated by Pygments <https://pygments.org/>
Copyright 2006-2024 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
*/
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
body .hll { background-color: #ffffcc }
body { background: #f8f8f8; }
body .c { color: #3D7B7B; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #008000; font-weight: bold } /* Keyword */
body .o { color: #666666 } /* Operator */
body .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
body .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
body .cp { color: #9C6500 } /* Comment.Preproc */
body .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
body .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
body .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
body .gr { color: #E40000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #008400 } /* Generic.Inserted */
body .go { color: #717171 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0044DD } /* Generic.Traceback */
body .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
body .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #008000 } /* Keyword.Pseudo */
body .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #BA2121 } /* Literal.String */
body .na { color: #687822 } /* Name.Attribute */
body .nb { color: #008000 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #717171; font-weight: bold } /* Name.Entity */
body .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #767600 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #008000; font-weight: bold } /* Name.Tag */
body .nv { color: #19177C } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mb { color: #666666 } /* Literal.Number.Bin */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sa { color: #BA2121 } /* Literal.String.Affix */
body .sb { color: #BA2121 } /* Literal.String.Backtick */
body .sc { color: #BA2121 } /* Literal.String.Char */
body .dl { color: #BA2121 } /* Literal.String.Delimiter */
body .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #BA2121 } /* Literal.String.Double */
body .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #BA2121 } /* Literal.String.Heredoc */
body .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #008000 } /* Literal.String.Other */
body .sr { color: #A45A77 } /* Literal.String.Regex */
body .s1 { color: #BA2121 } /* Literal.String.Single */
body .ss { color: #19177C } /* Literal.String.Symbol */
body .bp { color: #008000 } /* Name.Builtin.Pseudo */
body .fm { color: #0000FF } /* Name.Function.Magic */
body .vc { color: #19177C } /* Name.Variable.Class */
body .vg { color: #19177C } /* Name.Variable.Global */
body .vi { color: #19177C } /* Name.Variable.Instance */
body .vm { color: #19177C } /* Name.Variable.Magic */
body .il { color: #666666 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Real-Time Cryptocurrency Dashboard</span>

<span class="sd">This script implements a real-time cryptocurrency dashboard using Streamlit. It interacts with the Twelve Data API</span>
<span class="sd">to fetch and visualize market data. The application features OHLC candlestick charts, line graphs, and dynamic user inputs,</span>
<span class="sd">providing insights into cryptocurrency trends.</span>

<span class="sd">Features:</span>
<span class="sd">- API integration for fetching real-time and historical cryptocurrency data.</span>
<span class="sd">- Visualization using Plotly (OHLC and line charts).</span>
<span class="sd">- Interactive UI with motivational messages.</span>
<span class="sd">- Configurable logging for debugging and monitoring.</span>

<span class="sd">Dependencies:</span>
<span class="sd">- streamlit, pandas, plotly, requests, dotenv, twelvedata</span>

<span class="sd">Author: Stevenson Gerard</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>  <span class="c1"># Import os module for environment variable handling</span>
<span class="kn">import</span> <span class="nn">time</span>  <span class="c1"># Import time module for sleep delays</span>
<span class="kn">import</span> <span class="nn">random</span>  <span class="c1"># Import random module for random selections</span>
<span class="kn">import</span> <span class="nn">logging</span>  <span class="c1"># Import logging module for logging configuration</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>  <span class="c1"># Import Decimal for precise numeric representation</span>

<span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>  <span class="c1"># Import Streamlit for web app interface</span>
<span class="kn">import</span> <span class="nn">requests</span>  <span class="c1"># Import requests module for making HTTP requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  <span class="c1"># Import pandas for data manipulation</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>  <span class="c1"># Import Plotly for advanced charting</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>  <span class="c1"># Import Plotly Express for simpler charting</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>  <span class="c1"># Import load_dotenv to read .env files</span>
<span class="kn">from</span> <span class="nn">twelvedata</span> <span class="kn">import</span> <span class="n">TDClient</span>  <span class="c1"># Import TDClient for Twelve Data API access</span>
<span class="kn">import</span> <span class="nn">pdfkit</span> <span class="c1"># used to download file as PDF files</span>
<span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span> <span class="c1"># used to maintain/highlight files downloaded</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">PythonLexer</span> 
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="kn">from</span> <span class="nn">api.motivational</span> <span class="kn">import</span> <span class="n">motivational</span>  <span class="c1"># Import motivational texts for user interface</span>
<span class="kn">from</span> <span class="nn">api.backend_data</span> <span class="kn">import</span> <span class="n">quote</span><span class="p">,</span> <span class="n">overtime_data</span>  <span class="c1"># Import backend data handling</span>

<span class="c1"># Configure logging with a specific format and level</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">,</span>  <span class="c1"># Set logging level to show only critical errors</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{asctime}</span><span class="s2"> | </span><span class="si">{levelname}</span><span class="s2"> | </span><span class="si">{name}</span><span class="s2"> | </span><span class="si">{message}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># Define the format for log messages</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;{&quot;</span><span class="p">,</span>  <span class="c1"># Use the new style format with curly braces</span>
    <span class="n">datefmt</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">,</span>  <span class="c1"># Set the date format for log messages</span>
    <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Override any previous logging configuration</span>
<span class="p">)</span>

<span class="c1"># Suppress verbose DEBUG logs from external libraries</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;urllib3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;requests&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

<span class="c1"># Load environment variables from the .env file</span>
<span class="n">load_dotenv</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">CryptoView</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    CryptoView Class</span>

<span class="sd">    This class contains methods for fetching, processing, and visualizing cryptocurrency data</span>
<span class="sd">    within a Streamlit application.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">dataset_arrays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a random color and motivational text for UI elements.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - tuple: (str, str) A random color and a motivational text.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Select a random color for UI elements</span>
        <span class="n">gui_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomColorSelection</span><span class="p">([</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;violet&quot;</span><span class="p">,</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="s2">&quot;rainbow&quot;</span><span class="p">])</span>
        <span class="c1"># Select a random motivational text</span>
        <span class="n">motivational_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomColorSelection</span><span class="p">(</span><span class="n">motivational</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">gui_color</span><span class="p">,</span> <span class="n">motivational_text</span>  <span class="c1"># Return both selections as a tuple</span>

    <span class="k">def</span> <span class="nf">randomColorSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Randomly selects an item from a given list.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - dataset (list): List of items to choose from.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - str: A randomly selected item from the list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate the maximum index for random selection</span>
        <span class="n">array_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="c1"># Generate a random index</span>
        <span class="n">random_number</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">array_length</span><span class="p">)</span>
        <span class="c1"># Return the item at the randomly selected index</span>
        <span class="k">return</span> <span class="n">dataset</span><span class="p">[</span><span class="n">random_number</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">allMarketData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches and displays an OHLC candlestick chart for market data.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Load market data into a pandas DataFrame</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">quote</span><span class="p">())</span>

        <span class="c1"># Convert string columns to numeric types for plotting</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">])</span>

        <span class="c1"># Sort data by timestamp for correct chronological plotting</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Create a candlestick chart using Plotly</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">go</span><span class="o">.</span><span class="n">Candlestick</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">],</span>  <span class="c1"># X-axis with timestamps</span>
            <span class="nb">open</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;open&#39;</span><span class="p">],</span>  <span class="c1"># Open prices</span>
            <span class="n">high</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>  <span class="c1"># High prices</span>
            <span class="n">low</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>  <span class="c1"># Low prices</span>
            <span class="n">close</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">],</span>  <span class="c1"># Close prices</span>
            <span class="n">increasing_line_color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span>  <span class="c1"># Color for increasing candles</span>
            <span class="n">decreasing_line_color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span>  <span class="c1"># Color for decreasing candles</span>
        <span class="p">))</span>

        <span class="c1"># Update chart layout for better appearance</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Stock OHLC Chart&#39;</span><span class="p">,</span>
            <span class="n">xaxis_title</span><span class="o">=</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span>
            <span class="n">yaxis_title</span><span class="o">=</span><span class="s1">&#39;Price (USD)&#39;</span><span class="p">,</span>
            <span class="n">xaxis_rangeslider_visible</span><span class="o">=</span><span class="kc">False</span>  <span class="c1"># Hide the range slider for clarity</span>
        <span class="p">)</span>

        <span class="c1"># Display the chart in the Streamlit app</span>
        <span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectedCryptoChart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crypto</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays real-time and historical charts for a selected cryptocurrency.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - crypto (dict): Dictionary containing cryptocurrency data.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Construct API parameters for fetching real-time price</span>
        <span class="n">real_time_price_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TOKEN&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># Fetch real-time price data</span>
        <span class="n">real_time_price_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">real_time_price_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Construct API parameters for monthly time series</span>
        <span class="n">time_series_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;interval=1month&amp;outputsize=12&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TOKEN&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># Fetch monthly time series data</span>
        <span class="n">time_series_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;time_series&#39;</span><span class="p">,</span> <span class="n">time_series_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Construct API parameters for daily time series of the last 32 days</span>
        <span class="n">last_month_daily_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&amp;interval=1day&amp;outputsize=32&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TOKEN&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">last_month_daily</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;time_series&#39;</span><span class="p">,</span> <span class="n">last_month_daily_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Display the real-time price</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">### ðŸ’° Real-Time Price for **</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s1">&#39;currency_base&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">**</span>
<span class="s2">#### Current Price: **$</span><span class="si">{</span><span class="n">real_time_price_response</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">**</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Plot the monthly and daily charts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cryptoLineGraphCreation</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">time_series_response</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cryptoLineGraphCreation</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">last_month_daily</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">cryptoLineGraphCreation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a line graph with markers for closing prices.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - df (DataFrame): DataFrame containing time series data.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert &#39;datetime&#39; column to pandas datetime type</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>
        <span class="c1"># Convert &#39;close&#39; column to Decimal type for precision</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

        <span class="c1"># Sort DataFrame by datetime</span>
        <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Calculate the difference in close prices and assign marker colors</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;marker_color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;red&quot;</span><span class="p">)</span>

        <span class="c1"># Create a line graph of close prices</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">)</span>

        <span class="c1"># Add markers for monthly close points</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">],</span>
            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;marker_color&quot;</span><span class="p">]),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Close Markers&quot;</span>
        <span class="p">))</span>

        <span class="c1"># Update layout and display the graph</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> 
            <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Price (USD)&quot;</span><span class="p">,</span>
            <span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>  <span class="c1"># Reduce margins for a larger display area</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">600</span>  <span class="c1"># Increase the height of the chart</span>
            <span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">use_container_width</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  
    <span class="k">def</span> <span class="nf">selectedCryptoChart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">crypto</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches and displays real-time price, monthly trend, and daily trend charts for a selected cryptocurrency.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - crypto (dict): Dictionary containing information about the selected cryptocurrency.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Construct API query parameter for real-time price</span>
        <span class="n">real_time_price_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TOKEN&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="c1"># Make an API call to fetch real-time price data</span>
        <span class="n">real_time_price_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">real_time_price_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Construct API query parameter for monthly time series data</span>
        <span class="n">time_series_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&amp;interval=1month&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TOKEN&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="c1"># Make an API call to fetch monthly time series data</span>
        <span class="n">time_series_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;time_series&#39;</span><span class="p">,</span> <span class="n">time_series_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Construct API query parameter for daily time series data (last 32 days)</span>
        <span class="n">last_month_daily_parameter</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;?symbol=</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s2">&quot;symbol&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&amp;interval=1day&amp;outputsize=32&amp;apikey=</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TOKEN&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="c1"># Make an API call to fetch daily time series data</span>
        <span class="n">last_month_daily</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;time_series&#39;</span><span class="p">,</span> <span class="n">last_month_daily_parameter</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Log the fetched monthly time series data for debugging purposes</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;==&gt;&gt; time_series_response: </span><span class="si">{</span><span class="n">time_series_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Display real-time price using Markdown</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">### ðŸ’° Real-Time Price for **</span><span class="si">{</span><span class="n">crypto</span><span class="p">[</span><span class="s1">&#39;currency_base&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">**</span>
<span class="s2">#### Current Price: **$</span><span class="si">{</span><span class="n">real_time_price_response</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">**</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Convert monthly time series data to a DataFrame</span>
        <span class="n">monthly_chart</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">time_series_response</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
        <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s1">&#39;Monthly Chart Trend&#39;</span><span class="p">)</span>  <span class="c1"># Add a subheader for the monthly trend chart</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cryptoLineGraphCreation</span><span class="p">(</span><span class="n">monthly_chart</span><span class="p">)</span>  <span class="c1"># Create and display the line graph for the monthly trend</span>

        <span class="c1"># Convert daily time series data to a DataFrame</span>
        <span class="n">thirty_two_days</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">last_month_daily</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
        <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s1">&#39;Daily Chart Trend for Last 32 Days&#39;</span><span class="p">)</span>  <span class="c1"># Add a subheader for the daily trend chart</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cryptoLineGraphCreation</span><span class="p">(</span><span class="n">thirty_two_days</span><span class="p">)</span>  <span class="c1"># Create and display the line graph for the daily trend</span>

    <span class="k">def</span> <span class="nf">cryptoLineGraphCreation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a line graph with markers indicating the closing prices of the cryptocurrency.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - df (DataFrame): DataFrame containing the time series data.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert the &#39;datetime&#39; column to pandas datetime format</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>

        <span class="c1"># Convert &#39;open&#39; and &#39;close&#39; columns to Decimal type for better precision</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;open&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

        <span class="c1"># Sort the DataFrame by the &#39;datetime&#39; column</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">)</span>

        <span class="c1"># Calculate the change in &#39;close&#39; prices and determine marker colors (green for increase, red for decrease)</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;marker_color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;change&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;red&quot;</span><span class="p">)</span>

        <span class="c1"># Create a line chart for the &#39;close&#39; prices using Plotly Express</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">,</span>
                      <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="s2">&quot;Close Price (USD)&quot;</span><span class="p">,</span> <span class="s2">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;Date&quot;</span><span class="p">})</span>

        <span class="c1"># Add markers at the end of each month with colors indicating price increase or decrease</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">],</span>  <span class="c1"># X-axis values (dates)</span>
            <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;close&quot;</span><span class="p">],</span>  <span class="c1"># Y-axis values (close prices)</span>
            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span>  <span class="c1"># Display as markers</span>
            <span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># Marker size</span>
                <span class="n">color</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;marker_color&quot;</span><span class="p">],</span>  <span class="c1"># Marker color based on price change</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>  <span class="c1"># Outline color of the markers</span>
            <span class="p">),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Monthly Close Marker&quot;</span>  <span class="c1"># Name for the legend</span>
        <span class="p">))</span>

        <span class="c1"># Update chart layout for better readability</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Price (USD)&quot;</span><span class="p">)</span>

        <span class="c1"># Display the line chart in Streamlit</span>
        <span class="n">st</span><span class="o">.</span><span class="n">plotly_chart</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_pdf_from_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a PDF file with syntax-highlighted Python code.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - content (str): The Python code as a string.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - str: The path to the generated PDF file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Highlight the Python code using Pygments</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">(</span><span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="n">highlighted_code</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">PythonLexer</span><span class="p">(),</span> <span class="n">formatter</span><span class="p">)</span>

        <span class="c1"># Save the highlighted code as an HTML file</span>
        <span class="n">html_file</span> <span class="o">=</span> <span class="s2">&quot;highlighted_code.html&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">highlighted_code</span><span class="p">)</span>

        <span class="c1"># Convert the HTML file to PDF using pdfkit</span>
        <span class="n">pdf_file</span> <span class="o">=</span> <span class="s2">&quot;highlighted_code.pdf&quot;</span>
        <span class="n">pdfkit</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">html_file</span><span class="p">,</span> <span class="n">pdf_file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pdf_file</span>
    
    <span class="k">def</span> <span class="nf">apiCall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends an HTTP GET request to the Twelve Data API to fetch cryptocurrency data.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - endpoint (str): The API endpoint to call (e.g., &#39;price&#39;, &#39;time_series&#39;).</span>
<span class="sd">        - parameters (str): The query parameters for the API request.</span>
<span class="sd">        - header (bool): If True, include authorization headers; otherwise, make a simple GET request.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - dict: The JSON response from the API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Log the API call for debugging</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;==&gt;&gt; api call to </span><span class="si">{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2"> endpoint&quot;</span><span class="p">)</span>

        <span class="c1"># Construct the URL without headers</span>
        <span class="k">if</span> <span class="n">header</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.twelvedata.com/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}{</span><span class="n">parameters</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;==&gt;&gt; url: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># Send GET request without headers</span>

        <span class="c1"># Construct the URL with headers</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.twelvedata.com/</span><span class="si">{</span><span class="n">endpoint</span><span class="si">}{</span><span class="n">parameters</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>  <span class="c1"># Accept JSON response</span>
                <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TOKEN&#39;</span><span class="p">)</span>  <span class="c1"># Include API token from environment variables</span>
            <span class="p">}</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>  <span class="c1"># Send GET request with headers</span>

        <span class="c1"># Return the JSON response from the API</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">loadingComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays a loading spinner with motivational messages during data fetch.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">motivation_placeholder</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>  <span class="c1"># Create an empty placeholder for motivational messages</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Delay for 2 seconds</span>

        <span class="c1"># Display a loading spinner with motivational messages</span>
        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="s1">&#39;Wait for it...&#39;</span><span class="p">):</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">counter</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># Show two messages before clearing</span>
                <span class="n">motivation_placeholder</span><span class="o">.</span><span class="n">caption</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_arrays</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># Display a random motivational message</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Delay for 2 seconds</span>
                <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">motivation_placeholder</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>  <span class="c1"># Clear the placeholder after loading</span>
    
    <span class="k">def</span> <span class="nf">sourceCode</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the source code of the current script using Streamlit&#39;s `st.code()` component.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            &lt;style&gt;</span>
<span class="sd">            .streamlit-container pre {</span>
<span class="sd">                white-space: pre-wrap;       /* Enable line wrapping */</span>
<span class="sd">                word-wrap: break-word;       /* Break words if necessary */</span>
<span class="sd">                overflow-x: auto;            /* Allow horizontal scrolling if needed */</span>
<span class="sd">            }</span>
<span class="sd">            &lt;/style&gt;</span>
<span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span> <span class="c1">#allows wrapping and styling to fit your screen</span>

        <span class="c1"># Open the script file and display it with wrapping enabled</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;main.py&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Read the entire content of the file</span>
            <span class="n">st</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span>  <span class="c1"># Display the source code with wrapping</span>


    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main method to manage view switching and handle user interaction.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initialize session state for view management if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="s2">&quot;current_view&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s2">&quot;current_view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dashboard&quot;</span>  <span class="c1"># Set the default view to &#39;dashboard&#39;</span>

        <span class="c1"># Button to switch to the source code view</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;Checkout Python Source Code ðŸ‘ðŸ¾ðŸŽ¬ðŸðŸ’»ðŸ“šðŸ“ˆ&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;primary&#39;</span><span class="p">):</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s2">&quot;current_view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;source_code&quot;</span>  <span class="c1"># Update session state to display the source code view</span>

        <span class="c1"># Conditional rendering based on the current view</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s2">&quot;current_view&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;source_code&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_code_view</span><span class="p">()</span>  <span class="c1"># Display the source code view</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dashboard_view</span><span class="p">()</span>  <span class="c1"># Display the main dashboard view</span>


    <span class="k">def</span> <span class="nf">dashboard_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the main dashboard view with cryptocurrency data using Streamlit components.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Title and header for the dashboard</span>
        <span class="n">st</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Real-Time Crypto Dashboard&quot;</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">&quot;This is a simple app to display cryptocurrency data&quot;</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">divider</span><span class="p">()</span>  <span class="c1"># Add a horizontal divider for visual separation</span>

        <span class="c1"># Display a styled markdown message with color and text</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;span style=&#39;color: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_arrays</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">;&#39;&gt;Full Stack&lt;/span&gt; Development by Stevenson Gerard&quot;</span><span class="p">,</span>
            <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="c1"># Display another styled markdown message with emoji and dynamic text color</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_arrays</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[power] and :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_arrays</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">[agility] of Python&quot;</span><span class="p">)</span>

        <span class="c1"># Create an empty placeholder for the &#39;Get Stock Data&#39; button</span>
        <span class="n">market_placeholder</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>

        <span class="c1"># Initialize session state for the &#39;button_clicked&#39; flag if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="s1">&#39;button_clicked&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;button_clicked&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Set the default flag to False</span>

        <span class="c1"># Display a button to fetch stock data, update session state on click</span>
        <span class="k">if</span> <span class="n">market_placeholder</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s1">&#39;Get Stock Data&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;primary&#39;</span><span class="p">):</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;button_clicked&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set the flag to True when the button is clicked</span>

        <span class="c1"># Check if the &#39;Get Stock Data&#39; button was clicked</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;button_clicked&#39;</span><span class="p">]:</span>
            <span class="n">market_placeholder</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>  <span class="c1"># Clear the placeholder after the button is clicked</span>

            <span class="c1"># Fetch the list of cryptocurrencies from the API</span>
            <span class="n">crypto_response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apiCall</span><span class="p">(</span><span class="s1">&#39;cryptocurrencies&#39;</span><span class="p">)</span>
            <span class="c1"># Create a list of unique cryptocurrency names</span>
            <span class="n">unique_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">({</span><span class="n">each_object</span><span class="p">[</span><span class="s1">&#39;currency_base&#39;</span><span class="p">]:</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">each_object</span> <span class="ow">in</span> <span class="n">crypto_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]})</span>
            <span class="n">unique_names</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Select an option&#39;</span><span class="p">)</span>  <span class="c1"># Insert a default option at the beginning</span>

            <span class="c1"># Initialize session state for the selected cryptocurrency if it doesn&#39;t exist</span>
            <span class="k">if</span> <span class="s1">&#39;selected_crypto&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;selected_crypto&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Select an option&#39;</span>  <span class="c1"># Set default selection</span>

            <span class="c1"># Display a select box for choosing a cryptocurrency</span>
            <span class="n">selection_options</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">selectbox</span><span class="p">(</span>
                <span class="s2">&quot;Select a cryptocurrency:&quot;</span><span class="p">,</span>  <span class="c1"># Label for the select box</span>
                <span class="n">unique_names</span><span class="p">,</span>  <span class="c1"># List of options to display</span>
                <span class="n">index</span><span class="o">=</span><span class="n">unique_names</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;selected_crypto&#39;</span><span class="p">]),</span>  <span class="c1"># Set the default index</span>
                <span class="n">key</span><span class="o">=</span><span class="s1">&#39;crypto_select&#39;</span>  <span class="c1"># Use session state key to track the selected option</span>
            <span class="p">)</span>

            <span class="c1"># Update session state with the selected option</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s1">&#39;selected_crypto&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selection_options</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;==&gt;&gt; selection_options: </span><span class="si">{</span><span class="n">selection_options</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># Log the selected option for debugging</span>

            <span class="c1"># Check if a valid cryptocurrency is selected</span>
            <span class="k">if</span> <span class="n">selection_options</span> <span class="o">!=</span> <span class="s1">&#39;Select an option&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadingComponent</span><span class="p">()</span>  <span class="c1"># Display a loading spinner</span>

                <span class="c1"># Filter the API response to find the selected cryptocurrency object</span>
                <span class="n">find_selected_object</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">tmp</span><span class="p">:</span> <span class="n">tmp</span><span class="p">[</span><span class="s1">&#39;currency_base&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">selection_options</span><span class="p">,</span>
                    <span class="n">crypto_response</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">crypto_selected</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">find_selected_object</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Extract the selected cryptocurrency object</span>

                <span class="c1"># Display the selected cryptocurrency&#39;s chart</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selectedCryptoChart</span><span class="p">(</span><span class="n">crypto_selected</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">source_code_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the source code view with options to download the code as a color-coded PDF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Button to return to the main dashboard view</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;Tap Twice to Go Back to Dashboard&quot;</span><span class="p">):</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s2">&quot;current_view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dashboard&quot;</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># Instructions for the user</span>
        <span class="n">st</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Source Code View&quot;</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s1">&#39;Instructions ðŸ˜„&#39;</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            1. Press the 3 dots on the top right side and select **Wide mode** for a better view. ðŸ™ðŸ¾</span>
<span class="sd">            2. If you are on a mobile device, rotate your device to landscape mode for an even better view. ðŸ™ðŸ¾ðŸ“²</span>
<span class="sd">            3. Or you can just view it on a laptop for the best experience. ðŸ™ðŸ¾ðŸ˜„ðŸ’»</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Inject custom CSS to enable line wrapping for `st.code()`</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            &lt;style&gt;</span>
<span class="sd">            .streamlit-container pre {</span>
<span class="sd">                white-space: pre-wrap;</span>
<span class="sd">                word-wrap: break-word;</span>
<span class="sd">                overflow-x: auto;</span>
<span class="sd">            }</span>
<span class="sd">            &lt;/style&gt;</span>
<span class="sd">            &quot;&quot;&quot;</span><span class="p">,</span>
            <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

        <span class="c1"># Open the script file and display it with wrapping enabled</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;main.py&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">st</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span>

        <span class="c1"># Button to generate and download the PDF</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;Generate PDF&quot;</span><span class="p">):</span>
            <span class="n">pdf_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_pdf_from_code</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="s2">&quot;PDF generated successfully!&quot;</span><span class="p">)</span>

            <span class="c1"># Provide a download button for the PDF</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pdf</span><span class="p">:</span>
                <span class="n">pdf_data</span> <span class="o">=</span> <span class="n">pdf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Download Python Code in PDF Format&quot;</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">pdf_data</span><span class="p">,</span>
                    <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;highlighted_code.pdf&quot;</span><span class="p">,</span>
                    <span class="n">mime</span><span class="o">=</span><span class="s2">&quot;application/pdf&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Button to go back to the dashboard view</span>
        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;Tap Twice to Go Back to Dashboard.&quot;</span><span class="p">):</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">[</span><span class="s2">&quot;current_view&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;dashboard&quot;</span>
            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>    

<span class="c1"># Entry point of the application</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">instantiate</span> <span class="o">=</span> <span class="n">CryptoView</span><span class="p">()</span>  <span class="c1"># Instantiate the CryptoView class</span>
    <span class="n">main_page_header</span> <span class="o">=</span> <span class="n">instantiate</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>  <span class="c1"># Call the main method to start the app</span>
</pre></div>
</body>
</html>
